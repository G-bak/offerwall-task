<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>ìº í˜ì¸ ë“±ë¡</title>
</head>
<body>
  <h2>ğŸ“¢ ìº í˜ì¸ ë“±ë¡ í¼</h2>
  <form id="campaignForm">
    <label>ê´‘ê³ ì£¼ ID: <input type="text" name="user_id" required /></label><br><br>
    <label>ê´‘ê³ ìœ í˜•: <input type="text" name="type" required /></label><br><br>
    <label>ì„¸ë¶€ìœ í˜•: <input type="text" name="subtype" /></label><br><br>
    <label>í‚¤ì›Œë“œ: <input type="text" name="keywords" /></label><br><br>
    <label>ë­í‚¹ í‚¤ì›Œë“œ: <input type="text" name="rank_keyword" /></label><br><br>
    <label>ë§í¬: <input type="text" name="link" /></label><br><br>
    <label>ì‹œì‘ì¼ì‹œ: <input type="datetime-local" name="start_date" required /></label><br><br>
    <label>ì¢…ë£Œì¼ì‹œ: <input type="datetime-local" name="end_date" required /></label><br><br>
    <label>ëª©í‘œ ìˆ˜ëŸ‰: <input type="number" name="quantity" required /></label><br><br>
    <button type="submit">ë“±ë¡í•˜ê¸°</button>
  </form>

  <p id="responseMessage" style="color: green;"></p>

  <script>
    document.getElementById("campaignForm").addEventListener("submit", async function (e) {
      e.preventDefault();
      const form = e.target;
      const data = {
        user_id: form.user_id.value,
        type: form.type.value,
        subtype: form.subtype.value,
        keywords: form.keywords.value,
        rank_keyword: form.rank_keyword.value,
        link: form.link.value,
        start_date: new Date(form.start_date.value).toISOString(),
        end_date: new Date(form.end_date.value).toISOString(),
        quantity: Number(form.quantity.value)
      };

      const res = await fetch("http://localhost:5000/campaigns", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(data)
      });

      const result = await res.json();
      if (res.ok) {
        document.getElementById("responseMessage").textContent =
          `âœ… ìº í˜ì¸ ë“±ë¡ ì„±ê³µ (id=${result.campaign_id || "í™•ì¸ í•„ìš”"})`;
      } else {
        document.getElementById("responseMessage").textContent =
          `âŒ ì˜¤ë¥˜: ${result.detail || result.message}`;
      }
    });
  </script>
</body>
</html>
